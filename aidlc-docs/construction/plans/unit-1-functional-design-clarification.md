# Functional Design Clarification Questions - Unit 1

## Overview

초기 답변을 검토한 결과, 일부 답변에서 추가 명확화가 필요합니다. 다음 질문들에 답변해주세요.

---

## Clarification Questions

### CQ1: Table Entity - 상태 이력 저장 방식 (Q2 관련)
Q2에서 "상태 + 타임스탬프 + 이력 (모든 상태 변경 기록)" (D)를 선택하셨습니다.

테이블 상태 변경 이력을 어떻게 저장해야 할까요?

A) Table 엔티티 내부에 이력 배열로 저장
B) 별도의 TableStateHistory 엔티티로 분리
C) OrderHistory에 테이블 상태 정보 포함
D) 이력 저장 없이 현재 상태와 타임스탬프만 유지
E) Other (설명해주세요)

[Answer]: A

**Rationale**: 이력 저장 방식은 데이터 모델 설계와 쿼리 성능에 영향을 미칩니다.

---

### CQ2: Menu Entity - 옵션 데이터 구조 (Q4 관련)
Q4에서 "복잡한 옵션 (필수/선택, 다중선택, 가격 변동)" (D)를 선택하셨습니다.

메뉴 옵션을 어떻게 모델링해야 할까요?

A) Menu 엔티티 내부에 JSON 필드로 저장
B) 별도의 MenuOption, MenuOptionGroup 엔티티로 분리
C) 단순 텍스트 필드로 저장 (구조화 없음)
D) 옵션 템플릿 시스템 (재사용 가능한 옵션 정의)
E) Other (설명해주세요)

[Answer]: A

**Rationale**: 옵션 모델링 방식은 메뉴 관리 복잡도와 주문 생성 로직에 영향을 미칩니다.

---

### CQ3: Order Entity - 상태 전이 규칙 (Q5 관련)
Q5에서 "상세 전이 (대기중 → 확인됨 → 준비중 → 서빙 대기 → 완료)" (C)를 선택하셨습니다.

상태 전이 시 역방향 전이(예: 준비중 → 대기중)를 허용해야 할까요?

A) 역방향 전이 불가 (순방향만)
B) 특정 상태만 역방향 가능 (예: 확인됨 → 대기중)
C) 모든 상태에서 역방향 가능
D) 관리자 권한에 따라 결정
E) Other (설명해주세요)

[Answer]: A

**Rationale**: 역방향 전이 허용 여부는 비즈니스 로직 복잡도와 데이터 무결성에 영향을 미칩니다.

---

### CQ4: Data Validation - 클라이언트 검증 범위 (Q12 관련)
Q12에서 "클라이언트만 (프론트엔드)" (A)를 선택하셨습니다.

**중요**: 이 선택은 보안 위험이 있습니다. 클라이언트 측 검증만으로는 악의적인 요청을 막을 수 없습니다.

다시 한번 확인해주세요. 데이터 유효성 검증을 언제 수행해야 할까요?

A) 클라이언트만 (프론트엔드) - **보안 위험 있음**
B) 서버만 (백엔드) - 권장
C) 양쪽 모두 (프론트엔드 + 백엔드) - **가장 권장**
D) 다층 검증 (프론트엔드 + 백엔드 + 데이터베이스)
E) Other (설명해주세요)

[Answer]: C

**Rationale**: 보안을 위해 최소한 서버 측 검증은 필수입니다.

---

### CQ5: Entity Relationships - 메뉴 변경 시 과거 주문 (Q11 관련)
Q11에서 "직접 참조 (Menu ID만 저장)" (A)를 선택하셨습니다.

**중요**: 이 선택은 메뉴 정보 변경 시 과거 주문 데이터가 부정확해질 수 있습니다.

예시:
- 고객이 "아메리카노 3,000원"을 주문
- 나중에 관리자가 메뉴 가격을 "아메리카노 3,500원"으로 변경
- 과거 주문 내역을 조회하면 "아메리카노 3,500원"으로 표시됨 (실제 주문 가격과 다름)

다시 한번 확인해주세요. 주문 항목(OrderItem)이 메뉴(Menu)를 참조하는 방식은?

A) 직접 참조 (Menu ID만 저장) - **과거 데이터 부정확 위험**
B) 스냅샷 (주문 시점의 메뉴 정보 복사) - 권장
C) 하이브리드 (Menu ID + 주문 시점 가격/이름) - **가장 권장**
D) 완전 분리 (Menu와 독립적인 OrderItem)
E) Other (설명해주세요)

[Answer]: C

**Rationale**: 과거 주문 데이터의 정확성은 매출 분석과 고객 신뢰에 중요합니다.

---

### CQ6: Business Rules - 비관적 잠금 범위 (Q13 관련)
Q13에서 "비관적 잠금 (수정 중 다른 사용자 차단)" (C)를 선택하셨습니다.

비관적 잠금을 어느 범위에 적용해야 할까요?

A) 주문 단위 (한 주문 전체 잠금)
B) 주문 항목 단위 (개별 항목만 잠금)
C) 테이블 단위 (테이블의 모든 주문 잠금)
D) 잠금 없음 (낙관적 잠금으로 변경)
E) Other (설명해주세요)

[Answer]: A

**Rationale**: 잠금 범위는 동시성 성능과 사용자 경험에 영향을 미칩니다.

---

## Next Steps

1. 모든 명확화 질문에 [Answer]: 태그로 답변해주세요
2. 답변 완료 후 "완료했습니다"라고 알려주세요
3. 모든 답변이 명확해지면 Functional Design 아티팩트를 생성합니다

---

**문서 버전**: 1.0  
**작성일**: 2026-02-09  
**상태**: 명확화 질문 대기중
